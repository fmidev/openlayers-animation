<?xml version="1.0" encoding="utf-8" ?>
<!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN" "http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd">
<svg height="1049" version="1.1" width="2058" xmlns="http://www.w3.org/2000/svg">
<rect fill="#ffc8ff" height="88" stroke="#ffc8ff" stroke-width="1" width="93" x="554" y="29"/>
<rect fill="none" height="88" stroke="#000000" stroke-width="1" width="93" x="554" y="29"/>
<text font-family="Dialog" font-size="12" x="570" y="43">
AnimatorUi</text>
<rect fill="#000000" height="1" stroke="#000000" stroke-width="1" width="93" x="554" y="53"/>
<rect fill="#000000" height="1" stroke="#000000" stroke-width="1" width="93" x="554" y="84"/>
<rect fill="#c0c0c0" height="68" stroke="#c0c0c0" stroke-width="1" width="103" x="794" y="29"/>
<rect fill="none" height="68" stroke="#000000" stroke-width="1" width="103" x="794" y="29"/>
<text font-family="Dialog" font-size="12" x="799" y="43">
OpenLayers.Map</text>
<rect fill="#000000" height="1" stroke="#000000" stroke-width="1" width="103" x="794" y="53"/>
<rect fill="#000000" height="1" stroke="#000000" stroke-width="1" width="103" x="794" y="74"/>
<rect fill="#ffc8ff" height="71" stroke="#ffc8ff" stroke-width="1" width="93" x="42" y="29"/>
<rect fill="none" height="71" stroke="#000000" stroke-width="1" width="93" x="42" y="29"/>
<text font-family="Dialog" font-size="12" x="47" y="43">
TimeController</text>
<rect fill="#000000" height="1" stroke="#000000" stroke-width="1" width="93" x="42" y="53"/>
<rect fill="#000000" height="1" stroke="#000000" stroke-width="1" width="93" x="42" y="76"/>
<polyline fill="none" points="554,53 134,53" stroke="#000000" stroke-width="1"/>
<polygon fill="#000000" points="554,53 544,58 534,53 544,48" stroke="#000000" stroke-width="1"/>
<polygon fill="none" points="554,53 544,58 534,53 544,48" stroke="#000000" stroke-width="1"/>
<text font-family="Dialog" font-size="12" x="145" y="48">
1</text>
<polyline fill="none" points="646,45 794,45" stroke="#000000" stroke-width="1"/>
<polygon fill="#000000" points="646,45 656,40 666,45 656,50" stroke="#000000" stroke-width="1"/>
<polygon fill="none" points="646,45 656,40 666,45 656,50" stroke="#000000" stroke-width="1"/>
<text font-family="Dialog" font-size="12" x="775" y="40">
1</text>
<rect fill="#ffffff" height="224" stroke="#ffffff" stroke-width="1" width="493" x="474" y="533"/>
<rect fill="none" height="224" stroke="#000000" stroke-width="1" width="493" x="474" y="533"/>
<text font-family="Dialog" font-size="12" x="664" y="547">
Animation.Animation</text>
<rect fill="#000000" height="1" stroke="#000000" stroke-width="1" width="493" x="474" y="557"/>
<rect fill="#000000" height="1" stroke="#000000" stroke-width="1" width="493" x="474" y="595"/>
<text font-family="Dialog" font-size="12" x="478" y="610">
initialize(name : String,options : Object)</text>
<text font-family="Dialog" font-size="12" x="478" y="627">
doSetConfig(config : Animation.Config)</text>
<text font-family="Dialog" font-size="12" x="478" y="644">
registerController(ctrl : OpenLayers.Events)</text>
<text font-family="Dialog" font-size="12" x="478" y="661">
unregisterController(ctrl : OpenLayers.Events)</text>
<text font-family="Dialog" font-size="12" x="478" y="678">
startEvent()</text>
<text font-family="Dialog" font-size="12" x="478" y="695">
stopEvent()</text>
<text font-family="Dialog" font-size="12" x="478" y="712">
periodChangedEvent(event : Object)</text>
<text font-family="Dialog" font-size="12" x="478" y="729">
timeChangedEvent(event : Object)</text>
<rect fill="#c0c0c0" height="75" stroke="#c0c0c0" stroke-width="1" width="183" x="1354" y="141"/>
<rect fill="none" height="75" stroke="#000000" stroke-width="1" width="183" x="1354" y="141"/>
<text font-family="Dialog" font-size="12" x="1376" y="155">
OpenLayers.Layer.WMTS</text>
<rect fill="#000000" height="1" stroke="#000000" stroke-width="1" width="183" x="1354" y="165"/>
<text font-family="Dialog" font-size="12" x="1358" y="180">
time : String</text>
<rect fill="#000000" height="1" stroke="#000000" stroke-width="1" width="183" x="1354" y="190"/>
<text font-family="Dialog" font-size="12" x="1358" y="205">
initialize(config : Object)</text>
<polyline fill="none" points="840,96 840,533" stroke="#000000" stroke-width="1"/>
<polygon fill="#ffffff" points="840,96 845,106 840,116 835,106" stroke="#ffffff" stroke-width="1"/>
<polygon fill="none" points="840,96 845,106 840,116 835,106" stroke="#000000" stroke-width="1"/>
<text font-family="Dialog" font-size="12" x="848" y="516">
0..*</text>
<polygon fill="#ffffff" points="1274,253 1448,253 1458,263 1458,290 1274,290 1274,253" stroke="#ffffff" stroke-width="1"/>
<polyline fill="none" points="1274,253 1448,253 1458,263 1458,290 1274,290 1274,253" stroke="#000000" stroke-width="1"/>
<polygon fill="#ffffff" points="1448,253 1458,263 1448,263 1448,253" stroke="#ffffff" stroke-width="1"/>
<polyline fill="none" points="1448,253 1458,263 1448,263 1448,253" stroke="#000000" stroke-width="1"/>
<text font-family="Dialog" font-size="12" x="1277" y="269">
- time in ISO format</text>
<text font-family="Dialog" font-size="12" x="1277" y="285">
- on load events inform listener</text>
<line fill="#000000" stroke="#000000" stroke-width="1" x1="1378" x2="1378" y1="253" y2="248"/>
<line fill="#000000" stroke="#000000" stroke-width="1" x1="1378" x2="1378" y1="243" y2="238"/>
<line fill="#000000" stroke="#000000" stroke-width="1" x1="1378" x2="1378" y1="233" y2="228"/>
<line fill="#000000" stroke="#000000" stroke-width="1" x1="1378" x2="1378" y1="223" y2="218"/>
<rect fill="#ffffff" height="138" stroke="#ffffff" stroke-width="1" width="325" x="610" y="813"/>
<rect fill="none" height="138" stroke="#000000" stroke-width="1" width="325" x="610" y="813"/>
<text font-family="Dialog" font-size="12" x="676" y="847">
Animation.LayerContainerObserver</text>
<text font-family="Dialog" font-size="12" x="735" y="828">
&lt;&lt;interface&gt;&gt;</text>
<rect fill="#000000" height="1" stroke="#000000" stroke-width="1" width="325" x="610" y="857"/>
<text font-family="Dialog" font-size="12" x="614" y="872">
loadFrameStartedCallback(objects : Array[LayerObject])</text>
<text font-family="Dialog" font-size="12" x="614" y="889">
loadFrameCompleteCallback(ojbects : Array[LayerObject])</text>
<text font-family="Dialog" font-size="12" x="614" y="906">
loadGroupProgressCallback(objects : Array[LayerObject])</text>
<text font-family="Dialog" font-size="12" x="614" y="923">
loadCompleteCallback(objects : Array[LayerObject])</text>
<text font-family="Dialog" font-size="12" x="614" y="940">
frameChangedCallback(objects : Array[LayerObject])</text>
<line fill="#000000" stroke="#000000" stroke-width="1" x1="738" x2="738" y1="756" y2="761"/>
<line fill="#000000" stroke="#000000" stroke-width="1" x1="738" x2="738" y1="766" y2="771"/>
<line fill="#000000" stroke="#000000" stroke-width="1" x1="738" x2="738" y1="776" y2="781"/>
<line fill="#000000" stroke="#000000" stroke-width="1" x1="738" x2="738" y1="786" y2="791"/>
<line fill="#000000" stroke="#000000" stroke-width="1" x1="738" x2="738" y1="796" y2="801"/>
<line fill="#000000" stroke="#000000" stroke-width="1" x1="738" x2="738" y1="806" y2="811"/>
<polygon fill="#ffffff" points="738,813 731,801 745,801" stroke="#ffffff" stroke-width="1"/>
<polygon fill="none" points="738,813 731,801 745,801" stroke="#000000" stroke-width="1"/>
<text font-family="Dialog" font-size="12" x="660" y="797">
&lt;&lt;realize&gt;&gt;</text>
<rect fill="#c0c0c0" height="122" stroke="#c0c0c0" stroke-width="1" width="234" x="1610" y="29"/>
<rect fill="none" height="122" stroke="#000000" stroke-width="1" width="234" x="1610" y="29"/>
<text font-family="Dialog" font-size="12" x="1637" y="43">
OpenLayers.Layer.event.Listener</text>
<rect fill="#000000" height="1" stroke="#000000" stroke-width="1" width="234" x="1610" y="53"/>
<rect fill="#000000" height="1" stroke="#000000" stroke-width="1" width="234" x="1610" y="82"/>
<text font-family="Dialog" font-size="12" x="1614" y="97">
loadstart(event : OpenLayers.Layer.event)</text>
<text font-family="Dialog" font-size="12" x="1614" y="114">
loadend(event : OpenLayers.Layer.event)</text>
<text font-family="Dialog" font-size="12" x="1614" y="131">
tileerror(event : OpenLayers.Layer.event)</text>
<polyline fill="none" points="1536,149 1610,149" stroke="#000000" stroke-width="1"/>
<line fill="#000000" stroke="#000000" stroke-width="1" x1="1598" x2="1610" y1="156" y2="149"/>
<line fill="#000000" stroke="#000000" stroke-width="1" x1="1598" x2="1610" y1="142" y2="149"/>
<text font-family="Dialog" font-size="12" x="1549" y="144">
callback</text>
<polygon fill="#ffffff" points="1426,645 1810,645 1820,655 1820,1034 1426,1034 1426,645" stroke="#ffffff" stroke-width="1"/>
<polyline fill="none" points="1426,645 1810,645 1820,655 1820,1034 1426,1034 1426,645" stroke="#000000" stroke-width="1"/>
<polygon fill="#ffffff" points="1810,645 1820,655 1810,655 1810,645" stroke="#ffffff" stroke-width="1"/>
<polyline fill="none" points="1810,645 1820,655 1810,655 1810,645" stroke="#000000" stroke-width="1"/>
<text font-family="Dialog" font-size="12" x="1429" y="661">
Container handles loading and animation of WMs or WMTS layers.</text>
<text font-family="Dialog" font-size="12" x="1429" y="677">
Container contains list of all the layers. They are loaded in</text>
<text font-family="Dialog" font-size="12" x="1429" y="693">
certain order.</text>
<text font-family="Dialog" font-size="12" x="1429" y="725">
Certain amount of layers are loaded asynchronously at a time.</text>
<text font-family="Dialog" font-size="12" x="1429" y="741">
So, not necessary only one or all simultaneously. When, a loading</text>
<text font-family="Dialog" font-size="12" x="1429" y="757">
of a layer finishes, a new layer is chosen for loading if one exists.</text>
<text font-family="Dialog" font-size="12" x="1429" y="773">
This is done until all the layers between begin time and end time</text>
<text font-family="Dialog" font-size="12" x="1429" y="789">
are loaded for given resolution. This way, layers are loaded step</text>
<text font-family="Dialog" font-size="12" x="1429" y="805">
by step.</text>
<text font-family="Dialog" font-size="12" x="1429" y="837">
Container array can be used to check which layers have</text>
<text font-family="Dialog" font-size="12" x="1429" y="853">
been loaded and which have not. In implementation, choosing can</text>
<text font-family="Dialog" font-size="12" x="1429" y="869">
be abstracted by providing means to iterate loading, for example by</text>
<text font-family="Dialog" font-size="12" x="1429" y="885">
requesting layer by calling next-function.</text>
<text font-family="Dialog" font-size="12" x="1429" y="917">
Alogrithm used for loading: exponents of two are used to decide index</text>
<text font-family="Dialog" font-size="12" x="1429" y="933">
of frames to load. First, load first frame and frame that has the</text>
<text font-family="Dialog" font-size="12" x="1429" y="949">
greates index that is exponent of two and is between begin and</text>
<text font-family="Dialog" font-size="12" x="1429" y="965">
end time. Then, when one group is loaded, step is decreased to</text>
<text font-family="Dialog" font-size="12" x="1429" y="981">
be smaller exponent of two. Notice, frames that have index of same</text>
<text font-family="Dialog" font-size="12" x="1429" y="997">
exponent of two steps are grouped together.</text>
<text font-family="Dialog" font-size="12" x="1429" y="1029">
Progress is informed with callback.</text>
<rect fill="#c0c0c0" height="71" stroke="#c0c0c0" stroke-width="1" width="193" x="938" y="29"/>
<rect fill="none" height="71" stroke="#000000" stroke-width="1" width="193" x="938" y="29"/>
<text font-family="Dialog" font-size="12" x="984" y="43">
OpenLayers.Layer</text>
<rect fill="#000000" height="1" stroke="#000000" stroke-width="1" width="193" x="938" y="53"/>
<text font-family="Dialog" font-size="12" x="942" y="68">
events : OpenLayers.Events</text>
<rect fill="#000000" height="1" stroke="#000000" stroke-width="1" width="193" x="938" y="78"/>
<polyline fill="none" points="954,533 954,99" stroke="#000000" stroke-width="1"/>
<polygon fill="#ffffff" points="954,99 961,111 947,111" stroke="#ffffff" stroke-width="1"/>
<polygon fill="none" points="954,99 961,111 947,111" stroke="#000000" stroke-width="1"/>
<rect fill="#ffffff" height="169" stroke="#ffffff" stroke-width="1" width="516" x="1178" y="317"/>
<rect fill="none" height="169" stroke="#000000" stroke-width="1" width="516" x="1178" y="317"/>
<text font-family="Dialog" font-size="12" x="1374" y="331">
Animation.LayerObject</text>
<rect fill="#000000" height="1" stroke="#000000" stroke-width="1" width="516" x="1178" y="341"/>
<text font-family="Dialog" font-size="12" x="1182" y="356">
layer : OpenLayers.Layer.WMTS||WMS</text>
<rect fill="#000000" height="1" stroke="#000000" stroke-width="1" width="516" x="1178" y="387"/>
<text font-family="Dialog" font-size="12" x="1182" y="402">
LayerObject(config : Object,map : OpenLayers.Map,observer : Animation.LayerEventObserver)</text>
<text font-family="Dialog" font-size="12" x="1182" y="419">
loadLayer()</text>
<text font-family="Dialog" font-size="12" x="1182" y="436">
setVisibility(visibility : Boolean)</text>
<text font-family="Dialog" font-size="12" x="1182" y="453">
setOpacity(opacity : Boolean)</text>
<rect fill="#ffffff" height="313" stroke="#ffffff" stroke-width="1" width="349" x="1034" y="541"/>
<rect fill="none" height="313" stroke="#000000" stroke-width="1" width="349" x="1034" y="541"/>
<text font-family="Dialog" font-size="12" x="1137" y="555">
Animation.LayerContainer</text>
<rect fill="#000000" height="1" stroke="#000000" stroke-width="1" width="349" x="1034" y="565"/>
<text font-family="Dialog" font-size="12" x="1038" y="580">
layers : Array[LayerObject]</text>
<rect fill="#000000" height="1" stroke="#000000" stroke-width="1" width="349" x="1034" y="598"/>
<text font-family="Dialog" font-size="12" x="1038" y="613">
LayerContainer(observer : Animation.LayerContainerObserver)</text>
<text font-family="Dialog" font-size="12" x="1038" y="630">
setConfig(config : Object)</text>
<text font-family="Dialog" font-size="12" x="1038" y="647">
setBeginTime(time : Date)</text>
<text font-family="Dialog" font-size="12" x="1038" y="664">
setEndTime(time : Date)</text>
<text font-family="Dialog" font-size="12" x="1038" y="681">
setResolutionTime(time : Integer)</text>
<text font-family="Dialog" font-size="12" x="1038" y="698">
setVisibility(visibility : Boolean)</text>
<text font-family="Dialog" font-size="12" x="1038" y="715">
setOpacity(opacity : Boolean)</text>
<text font-family="Dialog" font-size="12" x="1038" y="732">
reset()</text>
<text font-family="Dialog" font-size="12" x="1038" y="749">
loadAnimation(map : OpenLayers.Map)</text>
<text font-family="Dialog" font-size="12" x="1038" y="766">
startAnimation()</text>
<text font-family="Dialog" font-size="12" x="1038" y="783">
stopAnimation()</text>
<text font-family="Dialog" font-size="12" x="1038" y="800">
showFrame(time : Integer)</text>
<text font-family="Dialog" font-size="12" x="1038" y="817">
showNextFrame()</text>
<text font-family="Dialog" font-size="12" x="1038" y="834">
showPreviousFrame()</text>
<line fill="#000000" stroke="#000000" stroke-width="1" x1="1426" x2="1421" y1="758" y2="758"/>
<line fill="#000000" stroke="#000000" stroke-width="1" x1="1416" x2="1411" y1="758" y2="758"/>
<line fill="#000000" stroke="#000000" stroke-width="1" x1="1406" x2="1401" y1="758" y2="758"/>
<line fill="#000000" stroke="#000000" stroke-width="1" x1="1396" x2="1391" y1="758" y2="758"/>
<line fill="#000000" stroke="#000000" stroke-width="1" x1="1386" x2="1382" y1="758" y2="758"/>
<polyline fill="none" points="1332,541 1332,485" stroke="#000000" stroke-width="1"/>
<polygon fill="#ffffff" points="1332,541 1327,531 1332,521 1337,531" stroke="#ffffff" stroke-width="1"/>
<polygon fill="none" points="1332,541 1327,531 1332,521 1337,531" stroke="#000000" stroke-width="1"/>
<text font-family="Dialog" font-size="12" x="1305" y="505">
0..*</text>
<polyline fill="none" points="966,605 1034,605" stroke="#000000" stroke-width="1"/>
<polygon fill="#000000" points="966,605 976,600 986,605 976,610" stroke="#000000" stroke-width="1"/>
<polygon fill="none" points="966,605 976,600 986,605 976,610" stroke="#000000" stroke-width="1"/>
<text font-family="Dialog" font-size="12" x="1015" y="600">
1</text>
<polyline fill="none" points="1034,853 934,853" stroke="#000000" stroke-width="1"/>
<line fill="#000000" stroke="#000000" stroke-width="1" x1="946" x2="934" y1="846" y2="853"/>
<line fill="#000000" stroke="#000000" stroke-width="1" x1="946" x2="934" y1="860" y2="853"/>
<text font-family="Dialog" font-size="12" x="985" y="848">
callback</text>
<polygon fill="#ffffff" points="1722,317 2033,317 2043,327 2043,402 1722,402 1722,317" stroke="#ffffff" stroke-width="1"/>
<polyline fill="none" points="1722,317 2033,317 2043,327 2043,402 1722,402 1722,317" stroke="#000000" stroke-width="1"/>
<polygon fill="#ffffff" points="2033,317 2043,327 2033,327 2033,317" stroke="#ffffff" stroke-width="1"/>
<polyline fill="none" points="2033,317 2043,327 2033,327 2033,317" stroke="#000000" stroke-width="1"/>
<text font-family="Dialog" font-size="12" x="1725" y="333">
Normal OpenLayers style of registering to listen events.</text>
<text font-family="Dialog" font-size="12" x="1725" y="349">
Listener is shown here to highlight this in design. But, in</text>
<text font-family="Dialog" font-size="12" x="1725" y="365">
implementation use</text>
<text font-family="Dialog" font-size="12" x="1725" y="381">
layer.events.register(type, obj, listener);</text>
<line fill="#000000" stroke="#000000" stroke-width="1" x1="1755" x2="1755" y1="317" y2="312"/>
<line fill="#000000" stroke="#000000" stroke-width="1" x1="1755" x2="1755" y1="307" y2="302"/>
<line fill="#000000" stroke="#000000" stroke-width="1" x1="1755" x2="1755" y1="297" y2="292"/>
<line fill="#000000" stroke="#000000" stroke-width="1" x1="1755" x2="1755" y1="287" y2="282"/>
<line fill="#000000" stroke="#000000" stroke-width="1" x1="1755" x2="1755" y1="277" y2="272"/>
<line fill="#000000" stroke="#000000" stroke-width="1" x1="1755" x2="1755" y1="267" y2="262"/>
<line fill="#000000" stroke="#000000" stroke-width="1" x1="1755" x2="1755" y1="257" y2="252"/>
<line fill="#000000" stroke="#000000" stroke-width="1" x1="1755" x2="1755" y1="247" y2="242"/>
<line fill="#000000" stroke="#000000" stroke-width="1" x1="1755" x2="1755" y1="237" y2="232"/>
<line fill="#000000" stroke="#000000" stroke-width="1" x1="1755" x2="1755" y1="227" y2="222"/>
<line fill="#000000" stroke="#000000" stroke-width="1" x1="1755" x2="1755" y1="217" y2="212"/>
<line fill="#000000" stroke="#000000" stroke-width="1" x1="1755" x2="1755" y1="207" y2="202"/>
<line fill="#000000" stroke="#000000" stroke-width="1" x1="1755" x2="1755" y1="197" y2="192"/>
<line fill="#000000" stroke="#000000" stroke-width="1" x1="1755" x2="1755" y1="187" y2="182"/>
<line fill="#000000" stroke="#000000" stroke-width="1" x1="1755" x2="1755" y1="177" y2="172"/>
<line fill="#000000" stroke="#000000" stroke-width="1" x1="1755" x2="1755" y1="167" y2="162"/>
<line fill="#000000" stroke="#000000" stroke-width="1" x1="1755" x2="1755" y1="157" y2="152"/>
<line fill="#000000" stroke="#000000" stroke-width="1" x1="1627" x2="1627" y1="317" y2="312"/>
<line fill="#000000" stroke="#000000" stroke-width="1" x1="1627" x2="1627" y1="307" y2="302"/>
<line fill="#000000" stroke="#000000" stroke-width="1" x1="1627" x2="1627" y1="297" y2="292"/>
<line fill="#000000" stroke="#000000" stroke-width="1" x1="1627" x2="1627" y1="287" y2="282"/>
<line fill="#000000" stroke="#000000" stroke-width="1" x1="1627" x2="1627" y1="277" y2="272"/>
<line fill="#000000" stroke="#000000" stroke-width="1" x1="1627" x2="1627" y1="267" y2="262"/>
<line fill="#000000" stroke="#000000" stroke-width="1" x1="1627" x2="1627" y1="257" y2="252"/>
<line fill="#000000" stroke="#000000" stroke-width="1" x1="1627" x2="1627" y1="247" y2="242"/>
<line fill="#000000" stroke="#000000" stroke-width="1" x1="1627" x2="1627" y1="237" y2="232"/>
<line fill="#000000" stroke="#000000" stroke-width="1" x1="1627" x2="1627" y1="227" y2="222"/>
<line fill="#000000" stroke="#000000" stroke-width="1" x1="1627" x2="1627" y1="217" y2="212"/>
<line fill="#000000" stroke="#000000" stroke-width="1" x1="1627" x2="1627" y1="207" y2="202"/>
<line fill="#000000" stroke="#000000" stroke-width="1" x1="1627" x2="1627" y1="197" y2="192"/>
<line fill="#000000" stroke="#000000" stroke-width="1" x1="1627" x2="1627" y1="187" y2="182"/>
<line fill="#000000" stroke="#000000" stroke-width="1" x1="1627" x2="1627" y1="177" y2="172"/>
<line fill="#000000" stroke="#000000" stroke-width="1" x1="1627" x2="1627" y1="167" y2="162"/>
<line fill="#000000" stroke="#000000" stroke-width="1" x1="1627" x2="1627" y1="157" y2="152"/>
<polygon fill="#ffffff" points="1627,150 1634,162 1620,162" stroke="#ffffff" stroke-width="1"/>
<polygon fill="none" points="1627,150 1634,162 1620,162" stroke="#000000" stroke-width="1"/>
<text font-family="Dialog" font-size="12" x="1641" y="169">
&lt;&lt;realize&gt;&gt;</text>
<rect fill="#ffffff" height="88" stroke="#ffffff" stroke-width="1" width="398" x="1482" y="541"/>
<rect fill="none" height="88" stroke="#000000" stroke-width="1" width="398" x="1482" y="541"/>
<text font-family="Dialog" font-size="12" x="1597" y="575">
Animation.LayerEventObserver</text>
<text font-family="Dialog" font-size="12" x="1643" y="556">
&lt;&lt;interface&gt;&gt;</text>
<rect fill="#000000" height="1" stroke="#000000" stroke-width="1" width="398" x="1482" y="585"/>
<text font-family="Dialog" font-size="12" x="1486" y="600">
layerLoadStartCallback(layer : Animation.LayerObject)</text>
<text font-family="Dialog" font-size="12" x="1486" y="617">
layerLoadEndCallback(layer : Animation.LayerObject,error : ErrorObject)</text>
<line fill="#000000" stroke="#000000" stroke-width="1" x1="1382" x2="1387" y1="565" y2="565"/>
<line fill="#000000" stroke="#000000" stroke-width="1" x1="1392" x2="1397" y1="565" y2="565"/>
<line fill="#000000" stroke="#000000" stroke-width="1" x1="1402" x2="1407" y1="565" y2="565"/>
<line fill="#000000" stroke="#000000" stroke-width="1" x1="1412" x2="1417" y1="565" y2="565"/>
<line fill="#000000" stroke="#000000" stroke-width="1" x1="1422" x2="1427" y1="565" y2="565"/>
<line fill="#000000" stroke="#000000" stroke-width="1" x1="1432" x2="1437" y1="565" y2="565"/>
<line fill="#000000" stroke="#000000" stroke-width="1" x1="1442" x2="1447" y1="565" y2="565"/>
<line fill="#000000" stroke="#000000" stroke-width="1" x1="1452" x2="1457" y1="565" y2="565"/>
<line fill="#000000" stroke="#000000" stroke-width="1" x1="1462" x2="1467" y1="565" y2="565"/>
<line fill="#000000" stroke="#000000" stroke-width="1" x1="1472" x2="1477" y1="565" y2="565"/>
<polygon fill="#ffffff" points="1482,565 1470,572 1470,558" stroke="#ffffff" stroke-width="1"/>
<polygon fill="none" points="1482,565 1470,572 1470,558" stroke="#000000" stroke-width="1"/>
<text font-family="Dialog" font-size="12" x="1412" y="555">
&lt;&lt;realize&gt;&gt;</text>
<polyline fill="none" points="1627,485 1627,541" stroke="#000000" stroke-width="1"/>
<line fill="#000000" stroke="#000000" stroke-width="1" x1="1620" x2="1627" y1="529" y2="541"/>
<line fill="#000000" stroke="#000000" stroke-width="1" x1="1634" x2="1627" y1="529" y2="541"/>
<text font-family="Dialog" font-size="12" x="1629" y="506">
callback</text>
<rect fill="#ffffff" height="88" stroke="#ffffff" stroke-width="1" width="133" x="218" y="837"/>
<rect fill="none" height="88" stroke="#000000" stroke-width="1" width="133" x="218" y="837"/>
<text font-family="Dialog" font-size="12" x="223" y="851">
Animation.EventObject</text>
<rect fill="#000000" height="1" stroke="#000000" stroke-width="1" width="133" x="218" y="861"/>
<text font-family="Dialog" font-size="12" x="222" y="876">
time : Integer</text>
<text font-family="Dialog" font-size="12" x="222" y="893">
error : ErrorObject</text>
<rect fill="#000000" height="1" stroke="#000000" stroke-width="1" width="133" x="218" y="903"/>
<rect fill="#ffffff" height="68" stroke="#ffffff" stroke-width="1" width="130" x="42" y="837"/>
<rect fill="none" height="68" stroke="#000000" stroke-width="1" width="130" x="42" y="837"/>
<text font-family="Dialog" font-size="12" x="47" y="851">
Animation.ErrorObject</text>
<rect fill="#000000" height="1" stroke="#000000" stroke-width="1" width="130" x="42" y="861"/>
<rect fill="#000000" height="1" stroke="#000000" stroke-width="1" width="130" x="42" y="882"/>
<polyline fill="none" points="218,861 171,861" stroke="#000000" stroke-width="1"/>
<polygon fill="#ffffff" points="218,861 208,866 198,861 208,856" stroke="#ffffff" stroke-width="1"/>
<polygon fill="none" points="218,861 208,866 198,861 208,856" stroke="#000000" stroke-width="1"/>
<text font-family="Dialog" font-size="12" x="176" y="856">
0..1</text>
<line fill="#000000" stroke="#000000" stroke-width="1" x1="1722" x2="1717" y1="333" y2="333"/>
<line fill="#000000" stroke="#000000" stroke-width="1" x1="1712" x2="1707" y1="333" y2="333"/>
<line fill="#000000" stroke="#000000" stroke-width="1" x1="1702" x2="1697" y1="333" y2="333"/>
<polygon fill="#ffffff" points="178,69 476,69 486,79 486,138 178,138 178,69" stroke="#ffffff" stroke-width="1"/>
<polyline fill="none" points="178,69 476,69 486,79 486,138 178,138 178,69" stroke="#000000" stroke-width="1"/>
<polygon fill="#ffffff" points="476,69 486,79 476,79 476,69" stroke="#ffffff" stroke-width="1"/>
<polyline fill="none" points="476,69 486,79 476,79 476,69" stroke="#000000" stroke-width="1"/>
<text font-family="Dialog" font-size="12" x="181" y="85">
Notice, animation config is set separately from</text>
<text font-family="Dialog" font-size="12" x="181" y="101">
layer constructor. Also, controller is registered</text>
<text font-family="Dialog" font-size="12" x="181" y="117">
separately. Then, same layer can change sub-layers,</text>
<text font-family="Dialog" font-size="12" x="181" y="133">
for example, if new time set is requested by controller.</text>
<rect fill="#ffffff" height="71" stroke="#ffffff" stroke-width="1" width="136" x="698" y="277"/>
<rect fill="none" height="71" stroke="#000000" stroke-width="1" width="136" x="698" y="277"/>
<text font-family="Dialog" font-size="12" x="703" y="291">
Animation.WmtsConfig</text>
<rect fill="#000000" height="1" stroke="#000000" stroke-width="1" width="136" x="698" y="301"/>
<text font-family="Dialog" font-size="12" x="702" y="316">
params : Object</text>
<rect fill="#000000" height="1" stroke="#000000" stroke-width="1" width="136" x="698" y="326"/>
<rect fill="#ffffff" height="71" stroke="#ffffff" stroke-width="1" width="133" x="338" y="277"/>
<rect fill="none" height="71" stroke="#000000" stroke-width="1" width="133" x="338" y="277"/>
<text font-family="Dialog" font-size="12" x="343" y="291">
Animation.WmsConfig</text>
<rect fill="#000000" height="1" stroke="#000000" stroke-width="1" width="133" x="338" y="301"/>
<text font-family="Dialog" font-size="12" x="342" y="316">
params : Object</text>
<rect fill="#000000" height="1" stroke="#000000" stroke-width="1" width="133" x="338" y="326"/>
<polyline fill="none" points="1506,317 1506,215" stroke="#000000" stroke-width="1"/>
<polygon fill="#ffffff" points="1506,317 1501,307 1506,297 1511,307" stroke="#ffffff" stroke-width="1"/>
<polygon fill="none" points="1506,317 1501,307 1506,297 1511,307" stroke="#000000" stroke-width="1"/>
<text font-family="Dialog" font-size="12" x="1515" y="232">
0..1</text>
<rect fill="#c0c0c0" height="75" stroke="#c0c0c0" stroke-width="1" width="293" x="1162" y="29"/>
<rect fill="none" height="75" stroke="#000000" stroke-width="1" width="293" x="1162" y="29"/>
<text font-family="Dialog" font-size="12" x="1243" y="43">
OpenLayers.Layer.WMS</text>
<rect fill="#000000" height="1" stroke="#000000" stroke-width="1" width="293" x="1162" y="53"/>
<text font-family="Dialog" font-size="12" x="1166" y="68">
time : String</text>
<rect fill="#000000" height="1" stroke="#000000" stroke-width="1" width="293" x="1162" y="78"/>
<text font-family="Dialog" font-size="12" x="1166" y="93">
initialize(url : String,params : Object,options : Object)</text>
<line fill="#000000" stroke="#000000" stroke-width="1" x1="1298" x2="1298" y1="103" y2="108"/>
<line fill="#000000" stroke="#000000" stroke-width="1" x1="1298" x2="1298" y1="113" y2="118"/>
<line fill="#000000" stroke="#000000" stroke-width="1" x1="1298" x2="1298" y1="123" y2="128"/>
<line fill="#000000" stroke="#000000" stroke-width="1" x1="1298" x2="1298" y1="133" y2="138"/>
<line fill="#000000" stroke="#000000" stroke-width="1" x1="1298" x2="1298" y1="143" y2="148"/>
<line fill="#000000" stroke="#000000" stroke-width="1" x1="1298" x2="1298" y1="153" y2="158"/>
<line fill="#000000" stroke="#000000" stroke-width="1" x1="1298" x2="1298" y1="163" y2="168"/>
<line fill="#000000" stroke="#000000" stroke-width="1" x1="1298" x2="1298" y1="173" y2="178"/>
<line fill="#000000" stroke="#000000" stroke-width="1" x1="1298" x2="1298" y1="183" y2="188"/>
<line fill="#000000" stroke="#000000" stroke-width="1" x1="1298" x2="1298" y1="193" y2="198"/>
<line fill="#000000" stroke="#000000" stroke-width="1" x1="1298" x2="1298" y1="203" y2="208"/>
<line fill="#000000" stroke="#000000" stroke-width="1" x1="1298" x2="1298" y1="213" y2="218"/>
<line fill="#000000" stroke="#000000" stroke-width="1" x1="1298" x2="1298" y1="223" y2="228"/>
<line fill="#000000" stroke="#000000" stroke-width="1" x1="1298" x2="1298" y1="233" y2="238"/>
<line fill="#000000" stroke="#000000" stroke-width="1" x1="1298" x2="1298" y1="243" y2="248"/>
<polyline fill="none" points="1202,317 1202,103" stroke="#000000" stroke-width="1"/>
<polygon fill="#ffffff" points="1202,317 1197,307 1202,297 1207,307" stroke="#ffffff" stroke-width="1"/>
<polygon fill="none" points="1202,317 1197,307 1202,297 1207,307" stroke="#000000" stroke-width="1"/>
<text font-family="Dialog" font-size="12" x="1209" y="122">
0..1</text>
<polyline fill="none" points="1454,61 1610,61" stroke="#000000" stroke-width="1"/>
<line fill="#000000" stroke="#000000" stroke-width="1" x1="1598" x2="1610" y1="68" y2="61"/>
<line fill="#000000" stroke="#000000" stroke-width="1" x1="1598" x2="1610" y1="54" y2="61"/>
<text font-family="Dialog" font-size="12" x="1457" y="79">
callback</text>
<rect fill="#ffffff" height="109" stroke="#ffffff" stroke-width="1" width="173" x="506" y="389"/>
<rect fill="none" height="109" stroke="#000000" stroke-width="1" width="173" x="506" y="389"/>
<text font-family="Dialog" font-size="12" x="545" y="403">
Animation.Config</text>
<rect fill="#000000" height="1" stroke="#000000" stroke-width="1" width="173" x="506" y="413"/>
<text font-family="Dialog" font-size="12" x="510" y="428">
url : String</text>
<text font-family="Dialog" font-size="12" x="510" y="445">
wms : Animation.WmsConfig</text>
<text font-family="Dialog" font-size="12" x="510" y="462">
wmts : Animation.WmtsConfig</text>
<rect fill="#000000" height="1" stroke="#000000" stroke-width="1" width="173" x="506" y="472"/>
<text font-family="Dialog" font-size="12" x="510" y="487">
newOperation()</text>
<polyline fill="none" points="678,389 698,347" stroke="#000000" stroke-width="1"/>
<polygon fill="#ffffff" points="678,389 677,377 686,371 686,382" stroke="#ffffff" stroke-width="1"/>
<polygon fill="none" points="678,389 677,377 686,371 686,382" stroke="#000000" stroke-width="1"/>
<text font-family="Dialog" font-size="12" x="704" y="365">
0..1</text>
<polyline fill="none" points="506,389 470,347" stroke="#000000" stroke-width="1"/>
<polygon fill="#ffffff" points="506,389 495,384 493,374 503,378" stroke="#ffffff" stroke-width="1"/>
<polygon fill="none" points="506,389 495,384 493,374 503,378" stroke="#000000" stroke-width="1"/>
<text font-family="Dialog" font-size="12" x="447" y="365">
0..1</text>
<rect fill="#ffffff" height="88" stroke="#ffffff" stroke-width="1" width="302" x="290" y="165"/>
<rect fill="none" height="88" stroke="#000000" stroke-width="1" width="302" x="290" y="165"/>
<text font-family="Dialog" font-size="12" x="397" y="179">
Animation.Wms</text>
<rect fill="#000000" height="1" stroke="#000000" stroke-width="1" width="302" x="290" y="189"/>
<rect fill="#000000" height="1" stroke="#000000" stroke-width="1" width="302" x="290" y="210"/>
<text font-family="Dialog" font-size="12" x="294" y="225">
initialize(name,params,options,myOptions)</text>
<text font-family="Dialog" font-size="12" x="294" y="242">
setConfig(url : String,params : Object,options : Object)</text>
<rect fill="#ffffff" height="88" stroke="#ffffff" stroke-width="1" width="208" x="618" y="165"/>
<rect fill="none" height="88" stroke="#000000" stroke-width="1" width="208" x="618" y="165"/>
<text font-family="Dialog" font-size="12" x="677" y="179">
Animation.Wmts</text>
<rect fill="#000000" height="1" stroke="#000000" stroke-width="1" width="208" x="618" y="189"/>
<rect fill="#000000" height="1" stroke="#000000" stroke-width="1" width="208" x="618" y="210"/>
<text font-family="Dialog" font-size="12" x="622" y="225">
initialize(config,myName,myOptions)</text>
<text font-family="Dialog" font-size="12" x="622" y="242">
setConfig(config : Object)</text>
<polyline fill="none" points="490,252 490,533" stroke="#000000" stroke-width="1"/>
<polygon fill="#ffffff" points="490,533 483,521 497,521" stroke="#ffffff" stroke-width="1"/>
<polygon fill="none" points="490,533 483,521 497,521" stroke="#000000" stroke-width="1"/>
<polyline fill="none" points="690,252 690,533" stroke="#000000" stroke-width="1"/>
<polygon fill="#ffffff" points="690,533 683,521 697,521" stroke="#ffffff" stroke-width="1"/>
<polygon fill="none" points="690,533 683,521 697,521" stroke="#000000" stroke-width="1"/>
<polyline fill="none" points="402,861 350,861" stroke="#000000" stroke-width="1"/>
<polygon fill="#000000" points="402,861 392,866 382,861 392,856" stroke="#000000" stroke-width="1"/>
<polygon fill="none" points="402,861 392,866 382,861 392,856" stroke="#000000" stroke-width="1"/>
<text font-family="Dialog" font-size="12" x="359" y="856">
1..*</text>
<polygon fill="#ffffff" points="66,405 366,405 376,415 376,650 66,650 66,405" stroke="#ffffff" stroke-width="1"/>
<polyline fill="none" points="66,405 366,405 376,415 376,650 66,650 66,405" stroke="#000000" stroke-width="1"/>
<polygon fill="#ffffff" points="366,405 376,415 366,415 366,405" stroke="#ffffff" stroke-width="1"/>
<polyline fill="none" points="366,405 376,415 366,415 366,405" stroke="#000000" stroke-width="1"/>
<text font-family="Dialog" font-size="12" x="69" y="421">
Normal OpenLayers style of registering</text>
<text font-family="Dialog" font-size="12" x="69" y="437">
to listen events. Animation listens controller</text>
<text font-family="Dialog" font-size="12" x="69" y="453">
events and controller listens animation progress.</text>
<text font-family="Dialog" font-size="12" x="69" y="469">
Listener is shown here to highlight this in design.</text>
<text font-family="Dialog" font-size="12" x="69" y="485">
But, in implementation use</text>
<text font-family="Dialog" font-size="12" x="69" y="501">
contoller.events.triggerEvent("someeventname", {});</text>
<text font-family="Dialog" font-size="12" x="69" y="517">
to trigger event for registered animation layer,</text>
<text font-family="Dialog" font-size="12" x="69" y="533">
for example, when time has changed in controller.</text>
<text font-family="Dialog" font-size="12" x="69" y="549">
And use </text>
<text font-family="Dialog" font-size="12" x="69" y="565">
animation.events.on(myevents);</text>
<text font-family="Dialog" font-size="12" x="69" y="581">
to register for animation events,</text>
<text font-family="Dialog" font-size="12" x="69" y="597">
such as framechanged.</text>
<text font-family="Dialog" font-size="12" x="69" y="613">
Animation registerController function automatically</text>
<text font-family="Dialog" font-size="12" x="69" y="629">
registers animation layer to listen for controller events,</text>
<text font-family="Dialog" font-size="12" x="69" y="645">
such as periodchanged, timechanged, etc.</text>
<polyline fill="none" points="474,755 343,755" stroke="#000000" stroke-width="1"/>
<line fill="#000000" stroke="#000000" stroke-width="1" x1="355" x2="343" y1="748" y2="755"/>
<line fill="#000000" stroke="#000000" stroke-width="1" x1="355" x2="343" y1="762" y2="755"/>
<text font-family="Dialog" font-size="12" x="444" y="746">
1..*</text>
<text font-family="Dialog" font-size="12" x="424" y="774">
callback</text>
<ellipse cx="409" cy="753" fill="#000000" rx="0.5" ry="0.5" stroke="#000000" stroke-width="1"/>
<ellipse cx="410" cy="754" fill="#ffffff" rx="-0.5" ry="-0.5" stroke="#ffffff" stroke-width="1"/>
<rect fill="#ffffff" height="88" stroke="#ffffff" stroke-width="1" width="156" x="402" y="837"/>
<rect fill="none" height="88" stroke="#000000" stroke-width="1" width="156" x="402" y="837"/>
<text font-family="Dialog" font-size="12" x="408" y="851">
Animation.AnimationEvent</text>
<rect fill="#000000" height="1" stroke="#000000" stroke-width="1" width="156" x="402" y="861"/>
<text font-family="Dialog" font-size="12" x="406" y="876">
layer : Animation.Animation</text>
<text font-family="Dialog" font-size="12" x="406" y="893">
events : Array[EventObject]</text>
<rect fill="#000000" height="1" stroke="#000000" stroke-width="1" width="156" x="402" y="903"/>
<line fill="#000000" stroke="#000000" stroke-width="1" x1="409" x2="409" y1="753" y2="758"/>
<line fill="#000000" stroke="#000000" stroke-width="1" x1="409" x2="409" y1="763" y2="768"/>
<line fill="#000000" stroke="#000000" stroke-width="1" x1="409" x2="409" y1="773" y2="778"/>
<line fill="#000000" stroke="#000000" stroke-width="1" x1="409" x2="409" y1="783" y2="788"/>
<line fill="#000000" stroke="#000000" stroke-width="1" x1="409" x2="409" y1="793" y2="798"/>
<line fill="#000000" stroke="#000000" stroke-width="1" x1="409" x2="409" y1="803" y2="808"/>
<line fill="#000000" stroke="#000000" stroke-width="1" x1="409" x2="409" y1="813" y2="818"/>
<line fill="#000000" stroke="#000000" stroke-width="1" x1="409" x2="409" y1="823" y2="828"/>
<line fill="#000000" stroke="#000000" stroke-width="1" x1="409" x2="409" y1="833" y2="837"/>
<polyline fill="none" points="134,99 474,533" stroke="#000000" stroke-width="1"/>
<line fill="#000000" stroke="#000000" stroke-width="1" x1="461" x2="474" y1="527" y2="533"/>
<line fill="#000000" stroke="#000000" stroke-width="1" x1="472" x2="474" y1="519" y2="533"/>
<text font-family="Dialog" font-size="12" x="90" y="162">
callback events</text>
<polyline fill="none" points="554,116 554,165" stroke="#000000" stroke-width="1"/>
<line fill="#000000" stroke="#000000" stroke-width="1" x1="547" x2="554" y1="153" y2="165"/>
<line fill="#000000" stroke="#000000" stroke-width="1" x1="561" x2="554" y1="153" y2="165"/>
<text font-family="Dialog" font-size="12" x="488" y="129">
add to map, register controller, set config</text>
<polyline fill="none" points="642,116 642,165" stroke="#000000" stroke-width="1"/>
<line fill="#000000" stroke="#000000" stroke-width="1" x1="635" x2="642" y1="153" y2="165"/>
<line fill="#000000" stroke="#000000" stroke-width="1" x1="649" x2="642" y1="153" y2="165"/>
<polyline fill="none" points="610,533 610,497" stroke="#000000" stroke-width="1"/>
<polygon fill="#ffffff" points="610,533 605,523 610,513 615,523" stroke="#ffffff" stroke-width="1"/>
<polygon fill="none" points="610,533 605,523 610,513 615,523" stroke="#000000" stroke-width="1"/>
<polygon fill="#ffffff" points="522,277 660,277 670,287 670,346 522,346 522,277" stroke="#ffffff" stroke-width="1"/>
<polyline fill="none" points="522,277 660,277 670,287 670,346 522,346 522,277" stroke="#000000" stroke-width="1"/>
<polygon fill="#ffffff" points="660,277 670,287 660,287 660,277" stroke="#ffffff" stroke-width="1"/>
<polyline fill="none" points="660,277 670,287 660,287 660,277" stroke="#000000" stroke-width="1"/>
<text font-family="Dialog" font-size="12" x="525" y="293">
Create config from given</text>
<text font-family="Dialog" font-size="12" x="525" y="309">
config object and use</text>
<text font-family="Dialog" font-size="12" x="525" y="325">
parent doSetConfig</text>
<line fill="#000000" stroke="#000000" stroke-width="1" x1="546" x2="546" y1="252" y2="257"/>
<line fill="#000000" stroke="#000000" stroke-width="1" x1="546" x2="546" y1="262" y2="267"/>
<line fill="#000000" stroke="#000000" stroke-width="1" x1="546" x2="546" y1="272" y2="277"/>
<line fill="#000000" stroke="#000000" stroke-width="1" x1="661" x2="661" y1="252" y2="257"/>
<line fill="#000000" stroke="#000000" stroke-width="1" x1="661" x2="661" y1="262" y2="267"/>
<line fill="#000000" stroke="#000000" stroke-width="1" x1="661" x2="661" y1="272" y2="277"/>
<line fill="#000000" stroke="#000000" stroke-width="1" x1="610" x2="610" y1="346" y2="351"/>
<line fill="#000000" stroke="#000000" stroke-width="1" x1="610" x2="610" y1="356" y2="361"/>
<line fill="#000000" stroke="#000000" stroke-width="1" x1="610" x2="610" y1="366" y2="371"/>
<line fill="#000000" stroke="#000000" stroke-width="1" x1="610" x2="610" y1="376" y2="381"/>
<line fill="#000000" stroke="#000000" stroke-width="1" x1="610" x2="610" y1="386" y2="389"/>
<rect fill="#ffc8ff" height="143" stroke="#ffc8ff" stroke-width="1" width="302" x="42" y="677"/>
<rect fill="none" height="143" stroke="#000000" stroke-width="1" width="302" x="42" y="677"/>
<text font-family="Dialog" font-size="12" x="143" y="691">
AnimationListener</text>
<rect fill="#000000" height="1" stroke="#000000" stroke-width="1" width="302" x="42" y="701"/>
<text font-family="Dialog" font-size="12" x="46" y="716">
events : OpenLayers.Events</text>
<rect fill="#000000" height="1" stroke="#000000" stroke-width="1" width="302" x="42" y="726"/>
<text font-family="Dialog" font-size="12" x="46" y="741">
frameloadstarted(event : Array[AnimationEvent])</text>
<text font-family="Dialog" font-size="12" x="46" y="758">
frameloadcomplete(event : Array[AnimationEvent])</text>
<text font-family="Dialog" font-size="12" x="46" y="775">
animationloadprogress(event : Array[AnimationEvent])</text>
<text font-family="Dialog" font-size="12" x="46" y="792">
animationloadcomplete(event : Array[AnimationEvent])</text>
<text font-family="Dialog" font-size="12" x="46" y="809">
framechanged(event : Array[AnimationEvent])</text>
<polyline fill="none" points="50,99 50,677" stroke="#000000" stroke-width="1"/>
<polygon fill="#000000" points="50,99 55,109 50,119 45,109" stroke="#000000" stroke-width="1"/>
<polygon fill="none" points="50,99 55,109 50,119 45,109" stroke="#000000" stroke-width="1"/>
<text font-family="Dialog" font-size="12" x="63" y="673">
1</text>
</svg>
